<template>
    <div id="wpvk-general-setting-tab" class="tab-container">
        <h2>Settings Form</h2>
        {{formData}}

        <line-chart :data="chartData"></line-chart>

        <div class="clear"></div>
    </div>
</template>

<script>
import { mapActions, mapGetters } from 'vuex'

export default {
    name: 'GeneralTab',

    data() {
        return {
            chartData: {
                '2021-05-13': 3,
                '2021-05-16': 5,
                '2021-05-19': 9,
            }
        }
    },

    mounted() {
        this.fetchSettings()
    },

    computed: {
        ...mapGetters([ 'GET_GENERAL_SETTINGS', 'GET_LOADING_TEXT' ]),

        formData: {
            get() {
                return this.GET_GENERAL_SETTINGS
            },
        },

        loadingText: {
            get() {
                return this.GET_LOADING_TEXT
            }
        }
    },

    methods: {
        ...mapActions([ 'FETCH_SETTINGS', 'SAVE_SETTINGS'  ]),

        saveSettings(e) {
            e.preventDefault();
            this.SAVE_SETTINGS( this.formData )
        },

        fetchSettings() {
            this.FETCH_SETTINGS()
        }
    }
}
</script>
